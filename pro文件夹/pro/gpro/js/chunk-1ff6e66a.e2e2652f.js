(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ff6e66a"],{"07d5":function(t,e,s){"use strict";s("5108")},"0c03":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("Nav"),a("div",{staticClass:"collect-nav"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("个人中心")])],1)],1),a("div",{staticClass:"user"},[a("img",{staticClass:"avatar",attrs:{src:s("92ef"),alt:""}}),a("div",{staticClass:"user-right"},[a("div",{staticClass:"user-name"},[t._v("登录名："+t._s(this.$store.state.username))]),a("div",[t._v("描述：这个人很懒，什么都没留下。")]),a("div",[a("span",[t._v("我的收货地址:")]),a("div",{staticClass:"location"},[a("div",{staticClass:"address"},[t._m(0),t._v(t._s(t.totalAddress)+" ")]),a("Button",{attrs:{type:"info",ghost:""},on:{click:t.handleChange}},[t._v("修改收货地址")])],1),t.isShow?a("div",[a("div",{attrs:{id:"dlgproject"}},[a("span",{staticClass:"labels"},[t._v("选择地区:")]),a("Cascader",{attrs:{data:t.data},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}})],1),a("div",{staticClass:"detail"},[a("span",{staticClass:"labels"},[t._v("详细地址:")]),a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入详细地址"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1),a("div",[a("span",[t._v("收货人姓名:")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("div",[a("span",[t._v("收货人电话:")]),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.phoneNum,callback:function(e){t.phoneNum=e},expression:"phoneNum"}})],1),a("Button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:t.submitAddress}},[t._v("确认修改")])],1):t._e()])])]),t._m(1),[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"label",attrs:{label:"我的收藏",name:"first"}},[a("div",{staticClass:"goods-card"},t._l(t.collectList,(function(e){return a("div",{key:e._id,staticClass:"card"},[a("router-link",{attrs:{to:{path:"detail",query:{id:e._id,table:e.table}}}},[a("img",{staticClass:"goodsImg",attrs:{src:e.goodsImg},on:{click:function(s){return t.addHistory(e._id)}}})]),a("h2",{staticClass:"price"},[t._v("￥"+t._s(e.price))]),a("a",{staticClass:"goods-title",attrs:{href:"#"}},[t._v(t._s(e.title))]),a("p",{staticClass:"store"},[t._v(t._s(e.store))])],1)})),0)]),a("el-tab-pane",{attrs:{label:"我的足迹",name:"second"}},[a("div",{staticClass:"goods-card"},t._l(t.historyList,(function(e){return a("div",{key:e._id,staticClass:"card"},[a("router-link",{attrs:{to:{path:"detail",query:{id:e._id}}}},[a("img",{staticClass:"goodsImg",attrs:{src:e.goodsImg,alt:""}})]),a("h2",{staticClass:"price"},[t._v("￥"+t._s(e.price))]),a("a",{staticClass:"goods-title",attrs:{href:"#"}},[t._v(t._s(e.title))]),a("p",{staticClass:"store"},[t._v(t._s(e.store))]),a("el-row",[a("el-button",{staticClass:"join-cart",attrs:{type:"success"},on:{click:function(s){return t.addCart(e._id)}}},[t._v("加入购物车")]),a("el-button",{attrs:{plain:"",icon:"el-icon-delete",type:"danger"},on:{click:function(s){return t.deleteHistory(e._id)}}},[t._v("删除记录")])],1)],1)})),0)])],1)]],2)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon"},[s("i",{staticClass:"el-icon-location-outline"}),t._v("寄送至 ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title"},[s("div",{staticClass:"discount"},[t._v("我的特卖")]),s("div",{staticClass:"eng"},[t._v("DISCOUNT")])])}],n=(s("b149"),s("0a09"),s("216c")),c={name:"Collect",components:{Nav:n["a"]},data:function(){return{collectList:"",activeName:"first",historyList:"",username:this.$store.state.username,value1:[],data:[],project:{projectProvince:"",projectCity:"",projectCounty:""},cityName:"",textarea:"",totalAddress:"",name:"",phoneNum:"",isShow:!1}},mounted:function(){this.value1=[this.project.projectProvince,this.project.projectCity,this.project.projectCounty],this.getCollect(),this.getCity(),this.addState(),this.getAddress()},computed:{isLoading:function(){return!!this.$store.state.username}},watch:{value1:function(t,e){this.project.projectProvince=t[0],this.project.projectCity=t[1],this.project.projectCounty=t[2],this.getCityName(t[0],t[1],t[2])},totalAddress:function(t){this.addState()}},methods:{handleChange:function(){this.isShow=!this.isShow},getAddress:function(){var t=this,e=this.username;this.$http.get("/getAddress?username=".concat(e)).then((function(e){t.totalAddress=e.data.data[0].address[0]}))},getCity:function(){var t=this;this.$http.get("/getCity").then((function(e){t.data=e.data.data}))},getCityName:function(t,e,s){var a=this;this.$http.get("/getCityName?province=".concat(t,"&city=").concat(e,"&country=").concat(s)).then((function(t){a.cityName=t.data.res}))},submitAddress:function(){this.totalAddress=this.cityName+" "+this.textarea+" ("+this.name+"收) "+this.phoneNum,this.isShow=!this.isShow},addHistory:function(t){var e=this.username;this.$http.post("/history",{id:t,username:e})},getCollect:function(){var t=this,e=this.username;this.$http.get("/collectList?username=".concat(e)).then((function(e){t.collectList=e.data.result}))},getHistory:function(){var t=this,e=this.username;this.$http.get("/getHistory?username=".concat(e)).then((function(e){t.historyList=e.data.result}))},handleClick:function(t,e){var s=e.target.id;"tab-second"==s&&this.getHistory()},deleteHistory:function(t){var e=this;this.$confirm("此操作将会删除此条历史记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var s=e.username;e.$http.post("/delHistory",{id:t,username:s}).then((function(t){e.getHistory()})),e.$message({type:"success",message:"删除成功!"})})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},addCart:function(t){var e=this.username;this.$http.post("/addCart",{id:t,username:e}).then()},addState:function(){this.$store.commit("setAddress",this.totalAddress)}}},o=c,r=(s("07d5"),s("5d22")),l=Object(r["a"])(o,a,i,!1,null,null,null);e["default"]=l.exports},5108:function(t,e,s){},"92ef":function(t,e,s){t.exports=s.p+"img/avatar.aece88eb.jpg"}}]);
//# sourceMappingURL=chunk-1ff6e66a.e2e2652f.js.map